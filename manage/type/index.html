<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="To do list web app">
<meta name="author" content="Asif Abdul Rahiman">
<title>Moneymaster</title>
<link rel="shortcut icon" href="../../utils/favicon.ico" type="image/x-icon">
<link rel="icon" href="../../utils/favicon.ico" type="image/x-icon">
<link rel="stylesheet" type="text/css" href="../../utils/mystyle.css">
<link href="../../utils/bootstrap.min.css" rel="stylesheet">  
<link href="../../utils/bootstrap-datepicker.css" rel="stylesheet">  
<script src="../../utils/jquery.js"></script>  
<script src="../../utils/bootstrap.min.js"></script>  
<script src="../../utils/bootstrap-datepicker.js"></script> 
<script src="../../utils/angular.min.js"></script>
</head>
<script>
var app = angular.module("typelist", []); 
app.controller("myCtrl", function($scope, $filter,$http) {
    $scope.type = [];
	 
    $http({
      method: 'GET',
      url: 'get.php'
   }).then(function (success){
   
	var _len = success.data.length;
  var  post, i;

  for (i = 0; i < _len; i++) {
    //debugger
    post = success.data[i];
	$scope.type.push({'Type':post.type});
  }
   },function (error){
	alert(error);
   });  
    
    $scope.addItem = function () {
        $scope.errortext = "";
		
		
        if (!$scope.addtype) {alert("Please fill the details");return;} 
		
		var ntype={'Type':$scope.addtype};
		var newtype=true;
		angular.forEach($scope.type, function(item) {
			if( item.Type.indexOf(ntype.Type)==0){
				
						newtype=false;}
			});
			if(newtype)
			{
				$scope.type.push(ntype);
				var data1=$scope.addtype;
				var dataString = 'type='+ data1;
				$scope.addtype=""
				
				
				
				
				$.ajax({
				type: "POST",
				url: "add.php",
				data: dataString,
				cache: false,
				success: function(result){}
				});
				
				
			}
			else{
				alert('Release already present');
			}
		
		
           
    }
    $scope.removeItem = function (x) {
		var index = $scope.type.indexOf(x);
		if (index != -1) {
        $scope.errortext = ""; 
		var datastring = 'type='+ $scope.type[index].Type;
		$.ajax({
		type: "POST",
		url: "remove.php",
		data: datastring,
		cache: false,
		success: function(result){}
		});
        $scope.type.splice(index, 1);
		}
    }
});
</script>

<body ng-app="typelist" ng-controller="myCtrl">

<div class="header1">
	<div class = "row">
	<div class = "col-sm-1 col-md-2">
	<img src="../../utils/logo.jpg" class="logo" />
	</div>
	<div class = "col-sm-2 col-md-2">
	<h2 class="title">Moneymaster</h2>
	</div>
	
	<div class = "col-sm-5 col-md-4">
	
	</div>
	<div class = "col-sm-4 col-md-4">
	</div>
	 
	</div>
	<h2>Add a Type</h2>
	
	<div class = "container-fluid">
		<div class = "row">
			
			<div class = "col-sm-3 "></div>
			
			<div class = "col-sm-4 " >
				<input type="text" style="width:100%" placeholder="Enter Type" ng-model="addtype">
			</div>

			<div class = "col-sm-1">
				<span ng-click="addItem()" class="btn btn-block btn-success">Add</span>
			</div>
			
			<div class = "col-sm-4"></div>
		</div>
  
	</div>

</br>

<table style="background-color:#ffff;">
	<tr style="background-color:#595757;color:#ffff"><td>Type</td><td>Delete</td></tr>
    <tr ng-repeat="x in type| orderBy:['Type']" ng-class-even="'trcolour'" ><td>  {{x.Type}} </td><td><span ng-click="removeItem(x)">clear</span></td></tr>
 </table>
 
</div>
</body>

</html>
